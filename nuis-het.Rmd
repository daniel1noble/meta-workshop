---
title: "Nuisance heterogeneity"
author: Patrice Pottier and Daniel W.A. Noble
date: '`r Sys.Date()`'
bibliography: ./bib/refs.bib
csl: ./bib/the-journal-of-experimental-biology.csl
output:
  bookdown::html_document2:
    css: style.css
    code_folding: show
    number_sections: no
    toc: yes
    toc_depth: 6
    toc_float: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, cache = FALSE, tidy = TRUE)
options(digits=2)
```

```{r klippy, echo=FALSE, include=TRUE, message=FALSE, warning=FALSE}
#install.packages("devtools")
remotes::install_github("rlesur/klippy")
klippy::klippy(tooltip_message = 'Click to Copy Code', tooltip_success = 'Done', position = 'right', color = "red")
```

# Introduction

Nuisance heterogeneity -- factors causing variation in effects that are blatantly obvious, like temperature and dosage differences -- are common in studies used in comparative physiology meta-analyses. Nuisance heterogeneity can be a big driver of effect size magnitude. For example, a contrast-based effect size, such as log response ratio, calculated from a study that has manipulated treatments to have a 10 $\deg$C temperature difference between treatments is likely going to give you a much larger effect size than a study manipulated a treatment temperature difference of 2\degC. Amalgamating such effects within a meta-analysis will make the interpretation of effect magnitude complicated because it's difficult to know what magnitude of, say temperature, our effect size should be interpreted over. 

There are a few different ways to deal with nuisance heterogeneity. The most common approach is to simply include a moderator in a meta-regression model that controls for the temperature difference between treatments. You can re-scale this continuous moderator (center the variable on the mean so 0, equates to the average difference) so that intercepts are more interpretable [@Noble2022]. Alternatively, we can 'correct' our effect sizes to account for the nuisance variable. In this tutorial, we'll overview the latter approach as it can simplify modelling.

# Effect Sizes Corrected for Nuisance Heterogenity

One common, and well known, effect size that is used in comparative physiology is the temperature coefficient, $Q_{10}$. As discussed, effect sizes need to be: 1) comparable across studies and 2) we need to know, or be able to approximate, the sampling variance in order to make use of meta-analytic models. 

``{r loadpackages, echo = TRUE, results = "hide", messages = FALSE, class.source='klippy'}
#install.packages("pacman")
#devtools::install_github("itchyshin/orchard_plot", subdir = "orchaRd", force = TRUE)
#devtools::install_github("daniel1noble/metaAidR")
pacman::p_load(devtools, png, jpeg, pander, cowplot, flextable, formatR, magick,
               tidyverse, metafor, orchaRd, here, osfr, magrittr, metaAidR)
```

```{r}
asr_dat <- read.csv("https://osf.io/qn2af/download")
```

## References

<div id="refs"></div>

<br>

## Session Information

```{r sessioninfo, echo = FALSE, tidy=TRUE}
# Here, we'll create some R code
pander(sessionInfo(), locale = FALSE)
```

## [Back to Table of Contents](https://daniel1noble.github.io/meta-workshop/) {.hide}

<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;"></div>
